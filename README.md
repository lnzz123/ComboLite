<p align="right">
  <b>ç®€ä½“ä¸­æ–‡</b> | <a href="./README_en.md">English</a>
</p>

# ComboLite: The Next-Generation Plugin Framework for Android

<p align="center">
  <img alt="Platform" src="https://img.shields.io/badge/Platform-Android-3DDC84.svg"/>
  <img alt="API" src="https://img.shields.io/badge/API-24%2B%20(Android%207.0)-blue.svg"/>
  <a href="https://kotlinlang.org/"><img alt="Kotlin" src="https://img.shields.io/badge/Kotlin-2.2.0-7F52FF.svg"/></a>
  <a href="https://developer.android.com/jetpack/compose"><img alt="Compose" src="https://img.shields.io/badge/Compose-1.9.0-FF6F00.svg"/></a>
  <a href="https://developer.android.com/studio/releases/gradle-plugin"><img alt="AGP" src="https://img.shields.io/badge/AGP-8.12.0-007BFF.svg"/></a>
  <a href="https://gradle.org/"><img alt="Gradle" src="https://img.shields.io/badge/Gradle-8.13-6C757D.svg"/></a>
  <a href="https://github.com/lnzz123/ComboLite/blob/main/LICENSE"><img alt="License" src="https://img.shields.io/badge/License-Apache%202.0-blue.svg"/></a>
  <a href="https://github.com/lnzz123"><img alt="GitHub" src="https://img.shields.io/badge/GitHub-lnzz123-181717.svg"/></a>
</p>

ğŸš€ ä¸º Jetpack Compose
æ‰“é€ çš„æ–°ä¸€ä»£å®‰å“æ’ä»¶åŒ–æ¡†æ¶ã€‚ä¸€ä¸ªç°ä»£ã€ç¨³å®šã€çµæ´»çš„æ’ä»¶åŒ–è§£å†³æ–¹æ¡ˆã€‚æ ¸å¿ƒç‰¹æ€§ï¼šåŸç”ŸComposeæ”¯æŒ |
100%å®˜æ–¹API | 0 Hook & 0 åå°„ | å»ä¸­å¿ƒåŒ–æ¶æ„

---

éšç€ Android ç”Ÿæ€çš„ä¸æ–­æ¼”è¿›ï¼Œä¼—å¤šè¯ç”Ÿäº View
æ—¶ä»£çš„ç»å…¸æ’ä»¶åŒ–æ¡†æ¶æ”¾ç°åœ¨çš„å¼€å‘åœºæ™¯å·²ç»æ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚å…¶ä¸­å¤šæ•°é¡¹ç›®å·²åœæ­¢ç»´æŠ¤ï¼Œå…¶åºå¤§è€Œæ™¦æ¶©çš„å†…éƒ¨å®ç°ã€å¯¹**
éå…¬å¼€APIï¼ˆHookä¸åå°„ï¼‰**çš„è¿‡åº¦ä¾èµ–ï¼Œä»¥åŠé«˜æ˜‚çš„æ¥å…¥æˆæœ¬ï¼Œä½¿å…¶åœ¨é¢å¯¹ç³»ç»Ÿé¢‘ç¹æ›´æ–°æ—¶ï¼Œæ„ˆå‘æ˜¾å¾—æ ¼æ ¼ä¸å…¥ã€‚

**`ComboLite` çš„è¯ç”Ÿï¼Œæ­£æ˜¯ä¸ºäº†ç»ˆç»“è¿™ä¸€å›°å¢ƒï¼Œä¸º Android å¼€å‘è€…æä¾›ä¸€ä¸ªç°ä»£åŒ–ã€ç¨³å®šã€çµæ´»çš„æ’ä»¶åŒ–æ¡†æ¶ã€‚**

ComboLite ä¸“ä¸ºç°ä»£åŒ– Android å¼€å‘è€Œç”Ÿã€‚ä»æºå¤´ä¸Šå½»åº•æŠ›å¼ƒäº†å……æ»¡é£é™©çš„éå…¬å¼€ API åå°„è°ƒç”¨ï¼Œä»¥å®Œå…¨å…¬å¼€çš„
API ä¸ºåŸºçŸ³ï¼Œå®ç°äº† 0 Hookã€0 åå°„ çš„çº¯å‡€æ¶æ„ï¼Œé€»è¾‘æ¸…æ™°ã€æ¥å…¥è½»ä¾¿ã€‚å®ƒåŸç”Ÿä¸º Jetpack Compose
è®¾è®¡ï¼Œå¹¶å¼€åˆ›æ€§åœ°å¼•å…¥äº†å»ä¸­å¿ƒåŒ–çš„ç®¡ç†å“²å­¦ï¼Œåœ¨ä¿è¯æè‡´ç¨³å®šæ€§çš„å‰æä¸‹ï¼Œèµ‹äºˆå¼€å‘è€…å‰æ‰€æœªæœ‰çš„çµæ´»æ€§ã€‚

æ— è®ºä½ æ˜¯æƒ³æ„å»ºä¸€ä¸ªæ‰€æœ‰åŠŸèƒ½çš†å¯æ’æ‹”çš„â€œç©ºå£³â€åº”ç”¨ï¼Œè¿˜æ˜¯æƒ³ä¸ºç°æœ‰é¡¹ç›®èµ‹äºˆåŠ¨æ€åŒ–èƒ½åŠ›ï¼Œ`ComboLite`
éƒ½å°†æ˜¯ä½ æœ€å¯é ã€æœ€ç°ä»£åŒ–çš„é€‰æ‹©ã€‚

## ğŸ“¸ ç¤ºä¾‹é¡¹ç›® (Screenshots)

ä¸‹è½½ç¤ºä¾‹Appï¼šhttps://github.com/lnzz123/ComboLite/releases

|          å®‰è£…å¯åŠ¨æ’ä»¶           |          å®‰è£…å¯åŠ¨æ’ä»¶2          |          ç¤ºä¾‹æ’ä»¶é¡µé¢           |
|:-------------------------:|:-------------------------:|:-------------------------:|
| ![ç¤ºä¾‹å›¾](image/figure1.jpg) | ![ç¤ºä¾‹å›¾](image/figure2.jpg) | ![ç¤ºä¾‹å›¾](image/figure3.jpg) |

|          ç¤ºä¾‹æ’ä»¶é¡µé¢2          |          å»ä¸­å¿ƒåŒ–ç®¡ç†           |         å´©æºƒç†”æ–­ä¸è‡ªæ„ˆæç¤º         |
|:-------------------------:|:-------------------------:|:-------------------------:|
| ![ç¤ºä¾‹å›¾](image/figure4.jpg) | ![ç¤ºä¾‹å›¾](image/figure5.jpg) | ![ç¤ºä¾‹å›¾](image/figure6.jpg) |

## âœ¨ æ ¸å¿ƒç†å¿µä¸ä¼˜åŠ¿

`ComboLite` çš„è®¾è®¡å“²å­¦æ ¹æ¤äºå››ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š

#### 1\. ç°ä»£åŒ–çš„è®¾è®¡ (Modern by Design)

* **åŸç”Ÿä¸º Compose è€Œç”Ÿ**: `ComboLite` æ˜¯ä¸ºæ»¡è¶³æ–°ä¸€ä»£ Android UI å·¥å…·åŒ… Jetpack Compose
  çš„éœ€æ±‚è€Œè®¾è®¡çš„ã€‚æ’ä»¶å¯ä»¥æ— ç¼ä½¿ç”¨ `@Composable` å‡½æ•°æ„å»ºç•Œé¢ï¼Œäº«å—å£°æ˜å¼ UI å¸¦æ¥çš„å¼€å‘ä¾¿åˆ©ã€‚
* **æ‹¥æŠ±ä¸»æµæŠ€æœ¯æ ˆ**: å®Œç¾é›†æˆ Kotlin Coroutinesã€StateFlowï¼Œå¹¶é‡‡ç”¨ Koin
  è¿›è¡Œä¾èµ–æ³¨å…¥ï¼Œè®©ä½ åœ¨æ’ä»¶å¼€å‘ä¸­ä¹Ÿèƒ½ä½¿ç”¨æœ€å‰æ²¿ã€æœ€é«˜æ•ˆçš„æŠ€æœ¯ã€‚
* **æœ€æ–°çš„å·¥å…·é“¾**: åŸºäºæœ€æ–°ç‰ˆ Android Studioã€Gradle å’Œ AGP æ„å»ºï¼Œæœç»äº†è€æ—§æ¡†æ¶å› å·¥å…·é“¾ä¸å…¼å®¹å¸¦æ¥çš„é›†æˆå™©æ¢¦ã€‚

#### 2\. æè‡´çš„ç¨³å®šä¸å…¼å®¹ (Stability & Compatibility)

* **0 Hook, 0 åå°„**: è¿™æ˜¯ ComboLite æœ€æ ¸å¿ƒçš„æ‰¿è¯ºã€‚æˆ‘ä»¬å®Œå…¨åŸºäº Android å®˜æ–¹æ¨èçš„ ClassLoader
  æœºåˆ¶ï¼Œä¸ä½¿ç”¨ä»»ä½• Hookã€‚åœ¨Resourcesèµ„æºåŠ è½½æ–¹é¢ï¼Œæˆ‘ä»¬ä¼˜å…ˆä½¿ç”¨æœ€æ–°çš„å®˜æ–¹ APIï¼Œä»…åœ¨å…¼å®¹ Android 11
  ä»¥ä¸‹çš„æ—§ç‰ˆç³»ç»Ÿæ—¶ï¼Œæ‰é‡‡ç”¨äº†ä¸šç•Œæ ‡å‡†çš„ã€ç¨³å®šå¯é çš„åå°„æ–¹æ¡ˆã€‚è¿™æ„å‘³ç€æ¡†æ¶ä¸»ä½“æ‹¥æœ‰æ— ä¸ä¼¦æ¯”çš„ç¨³å®šæ€§å’Œå¯¹æœªæ¥
  Android ç‰ˆæœ¬çš„å¤©ç„¶å…¼å®¹æ€§ã€‚
* **å¹¿æ³›çš„ç³»ç»Ÿæ”¯æŒ**: ç†è®ºä¸Šæ”¯æŒä» Android 7.0 (API 24) åˆ° Android 16+ çš„æ‰€æœ‰ç‰ˆæœ¬ï¼Œè®©ä½ æ— éœ€æ‹…å¿ƒç³»ç»Ÿç¢ç‰‡åŒ–é—®é¢˜ã€‚
* **æ™ºèƒ½çš„ä¾èµ–è§£æä¸ä¿®å¤**: æ¡†æ¶æ‹¥æœ‰å¼ºå¤§çš„**åŠ¨æ€ä¾èµ–è§£æèƒ½åŠ›**
  ã€‚æ’ä»¶é—´çš„ä¾èµ–å…³ç³»æ— éœ€é¢„å…ˆé…ç½®ï¼Œä¼šåœ¨ç±»åŠ è½½æ—¶è¢«è‡ªåŠ¨å‘ç°å¹¶åŠ¨æ€æ„å»ºæˆä¾èµ–å›¾ã€‚å½“æ‚¨éœ€è¦æ›´æ–°æˆ–é‡å¯ä¸€ä¸ªæ ¸å¿ƒæ’ä»¶æ—¶ï¼Œ
  `ComboLite` æä¾›çš„**é“¾å¼é‡å¯æœºåˆ¶**ä¼šè‡ªåŠ¨å¸è½½å¹¶é‡è½½æ‰€æœ‰å—å½±å“çš„ä¸Šæ¸¸æ’ä»¶ï¼Œä»è€Œå®Œç¾ä¿®å¤å› çƒ­æ›´æ–°å¯¼è‡´çš„ç±»åŠ è½½å™¨å†²çªé—®é¢˜ï¼Œç¡®ä¿ä¾èµ–é“¾çš„ç»å¯¹ä¸€è‡´æ€§ã€‚
* **å´©æºƒç†”æ–­ä¸è‡ªæ„ˆ**: `ComboLite` å†…ç½®äº†ä¸€ä¸ªå¼ºå¤§çš„**æ’ä»¶å´©æºƒå¤„ç†å™¨** (`PluginCrashHandler`)
  ã€‚å½“æ’ä»¶å› ç¼ºå°‘ä¾èµ–è€Œå¯¼è‡´ `ClassNotFoundException` æ—¶ï¼Œæ¡†æ¶ä¼šæ•è·è¿™ä¸ªä¸“æœ‰çš„
  `PluginDependencyException`ï¼Œå¹¶æ‰§è¡Œä¸€ç³»åˆ—è‡ªæ„ˆæ“ä½œï¼š
    * **ç²¾å‡†å®šä½**: å‡†ç¡®è¯†åˆ«å‡ºæ˜¯å“ªä¸ªæ’ä»¶å¼•å‘äº†å´©æºƒã€‚
    * **è‡ªåŠ¨ç†”æ–­**: è‡ªåŠ¨**ç¦ç”¨**è¿™ä¸ªæœ‰é—®é¢˜çš„æ’ä»¶ï¼Œé˜²æ­¢åº”ç”¨åœ¨ä¸‹æ¬¡å¯åŠ¨æ—¶é™·å…¥æ— é™å´©æºƒçš„å¾ªç¯ã€‚
    * **ä¼˜é›…é™çº§**: å¼•å¯¼ç”¨æˆ·åˆ°ä¸€ä¸ªå‹å¥½çš„é”™è¯¯æç¤ºé¡µé¢ï¼Œè€Œä¸æ˜¯ç›´æ¥é—ªé€€ï¼Œæå¤§åœ°æå‡äº†ç”¨æˆ·ä½“éªŒã€‚

  è¿™ä¸ªæœºåˆ¶å°†ä¸€ä¸ªæ½œåœ¨çš„ã€å¯¼è‡´æ•´ä¸ªåº”ç”¨ç˜«ç—ªçš„è‡´å‘½é”™è¯¯ï¼Œè½¬åŒ–ä¸ºä¸€ä¸ªå¯éš”ç¦»ã€å¯æ¢å¤çš„å±€éƒ¨é—®é¢˜ï¼Œä»è€Œæœ€å¤§é™åº¦åœ°ä¿éšœäº†å®¿ä¸»åº”ç”¨çš„ç¨³å®šæ€§ã€‚

#### 3\. ç»ˆæçš„çµæ´»ä¸è§£è€¦ (Flexibility & Decoupling)

* **å»ä¸­å¿ƒåŒ–æ¶æ„**: æ‰“ç ´äº†ä¼ ç»Ÿâ€œå®¿ä¸»-æ’ä»¶â€çš„å¼ºä¸­å¿ƒåŒ–æ¨¡å¼ã€‚ä»»ä½•æ’ä»¶éƒ½æ‹¥æœ‰ç®¡ç†ï¼ˆä¸‹è½½ã€å®‰è£…ã€æ›´æ–°ã€å¸è½½ï¼‰è‡ªèº«æˆ–å…¶ä»–æ’ä»¶çš„èƒ½åŠ›ï¼Œå¯ä»¥è½»æ¾å®ç°â€œæ’ä»¶å•†åº—â€ã€â€œæŒ‰éœ€ä¸‹è½½â€ç­‰é«˜çº§åŠŸèƒ½ã€‚
* **â€œç©ºå£³â€å®¿ä¸»æ”¯æŒ**: å®¿ä¸» App å¯ä»¥æ²¡æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œå®Œå…¨é€€åŒ–ä¸ºä¸€ä¸ªå¯åŠ¨å…¥å£ã€‚æ‰€æœ‰åŠŸèƒ½ã€æ‰€æœ‰ UI
  å‡å¯ç”±æ’ä»¶åŠ¨æ€æä¾›ã€‚
* **çµæ´»çš„æ’ä»¶å½¢æ€**: ä¸€ä¸ªæ ‡å‡†çš„ Android `Application` æˆ– `Library` (AAR)
  åº“é¡¹ç›®ï¼Œéƒ½å¯ä»¥è¢«è½»æ¾æ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„æ’ä»¶ï¼Œæå¤§åœ°é™ä½äº†æ’ä»¶å¼€å‘å’Œè¿ç§»çš„é—¨æ§›ã€‚

#### 4\. å“è¶Šçš„å¼€å‘è€…ä½“éªŒ (Developer Experience)

* **è½»é‡çº§æ ¸å¿ƒ**: æ¡†æ¶æ ¸å¿ƒæ¨¡å—ä»…åŒ…å«åå‡ ä¸ªæ ¸å¿ƒç±»ï¼Œä¾èµ–åº“é™¤äº† Koin å’Œ dexlib2 (ç”¨äºç±»ç´¢å¼•)
  å¤–å‡ ä¹æ²¡æœ‰å…¶ä»–ç¬¬ä¸‰æ–¹åº“ï¼Œå¯¹åº”ç”¨ä½“ç§¯å½±å“æå°ã€‚
* **å¾®ä¹å…¶å¾®çš„ä¾µå…¥æ€§**: é›†æˆ `ComboLite` å‡ ä¹ä¸éœ€è¦æ”¹åŠ¨ä½ é¡¹ç›®çš„åŸæœ‰ç»“æ„ã€‚ä½ çš„æ’ä»¶ä»£ç å¯ä»¥åƒå¼€å‘ä¸€ä¸ªæ™®é€šçš„
  App æˆ– Module ä¸€æ ·è‡ªç„¶ã€‚
* **é—ªç”µèˆ¬çš„ç±»æŸ¥æ‰¾**: é€šè¿‡åœ¨åŠ è½½æ—¶ä¸ºæ‰€æœ‰æ’ä»¶å»ºç«‹å…¨å±€ç±»ç´¢å¼•ï¼Œ`ComboLite` å®ç°äº† `O(1)`
  æ—¶é—´å¤æ‚åº¦çš„è·¨æ’ä»¶ç±»æŸ¥æ‰¾ï¼Œå½»åº•å‘Šåˆ«äº†ä¼ ç»Ÿæ’ä»¶æ¡†æ¶ä¸­æ™®éå­˜åœ¨çš„ç±»æŸ¥æ‰¾æ€§èƒ½ç“¶é¢ˆã€‚

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

`ComboLite` é‡‡ç”¨ç®€æ´è€Œå¼ºå¤§çš„å¾®æ ¸è®¾è®¡ï¼Œç”±å‡ ä¸ªæ ¸å¿ƒç»„ä»¶ååŒå·¥ä½œã€‚

```mermaid
graph TD
    subgraph Host App
        H[MyApplication] -- initializes --> PM
    end

    subgraph ComboLite Core
        PM(PluginManager)
        IM[InstallerManager]
        RM[ResourceManager]
        ProxyM[ProxyManager]
        DM[DependencyManager]
    end

    subgraph Loaded Plugins
        P1[Plugin A]
        P2[Plugin B]
    end

    PM -- delegates to --> IM & RM & ProxyM & DM
    H -- uses --> PM

    P1 -- ClassLoader --> DM
    P2 -- ClassLoader --> DM
    P1 -- depends on --> P2

    PM -- Manages Lifecycle --> P1 & P2
```

- **`PluginManager`**: æ¡†æ¶çš„ä¸­å¿ƒåè°ƒå™¨ï¼ˆå•ä¾‹ï¼‰ï¼Œè´Ÿè´£æ’ä»¶çš„åŠ è½½ã€å¸è½½ã€é‡å¯å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚
- **`InstallerManager`**: è´Ÿè´£æ’ä»¶çš„å®‰è£…ã€æ›´æ–°å’Œåˆæ³•æ€§æ ¡éªŒã€‚
- **`ResourceManager`**: è´Ÿè´£æ’ä»¶èµ„æºçš„åŠ è½½ä¸ç®¡ç†ï¼Œå…¼å®¹æ–°æ—§ Android ç‰ˆæœ¬ã€‚
- **`ProxyManager`**: è´Ÿè´£ Android å››å¤§ç»„ä»¶çš„ä»£ç†å’Œç”Ÿå‘½å‘¨æœŸåˆ†å‘ã€‚
- **`DependencyManager`**: è´Ÿè´£ç»´æŠ¤æ’ä»¶é—´çš„åŠ¨æ€ä¾èµ–å…³ç³»å›¾å’Œç±»ç´¢å¼•ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

é›†æˆ `ComboLite` åªéœ€ç®€å•çš„ä¸‰æ­¥ã€‚

### 1\. æ·»åŠ ä¾èµ–

åœ¨ä½ çš„å®¿ä¸»ï¼ˆæˆ–å£³ï¼‰åº”ç”¨çš„ `build.gradle.kts` ä¸­æ·»åŠ æ ¸å¿ƒåº“ä¾èµ–ï¼š

```kotlin
dependencies {
    implementation(projects.comboLiteCore)
}
```

### 2\. åˆå§‹åŒ–æ¡†æ¶

`ComboLite` æä¾›äº†åŸºç±»æ¥å¸®åŠ©æ‚¨å®Œæˆä¸€é”®å¼åˆå§‹åŒ–ï¼Œè¿™æ˜¯æˆ‘ä»¬**æ¨è**çš„æ–¹å¼ã€‚

#### æ–¹å¼ä¸€ï¼šç»§æ‰¿åŸºç±»ï¼ˆæ¨èï¼‰

åªéœ€è®©ä½ çš„ `Application` ç±»ç»§æ‰¿è‡ª `com.combo.core.base.BaseHostApplication`
ï¼Œå³å¯è‡ªåŠ¨å®Œæˆæ‰€æœ‰åˆå§‹åŒ–å·¥ä½œï¼ŒåŒ…æ‹¬æ’ä»¶åŠ è½½å™¨ã€èµ„æºç®¡ç†å™¨ä»¥åŠå´©æºƒå¤„ç†å™¨ã€‚

**è¿™å°±æ˜¯å…¨éƒ¨æ‰€éœ€çš„åˆå§‹åŒ–ä»£ç ï¼**

```kotlin
// åªéœ€ç»§æ‰¿ BaseHostApplication å³å¯
class MainApplication : BaseHostApplication() {
    override fun onCreate() {
        super.onCreate()
        // ä½ çš„å…¶ä»–åº”ç”¨çº§åˆå§‹åŒ–é€»è¾‘
    }
}
```

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆå§‹åŒ–ï¼ˆé€‚ç”¨äºç‰¹æ®Šåœºæ™¯ï¼‰

å¦‚æœä½ çš„ `Application` æ— æ³•ç»§æ‰¿ `BaseHostApplication`ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è¿›è¡Œåˆå§‹åŒ–ã€‚è¯·ç¡®ä¿æ‰€æœ‰æ­¥éª¤éƒ½æ­£ç¡®é…ç½®ï¼Œä»¥é¿å…æ½œåœ¨é—®é¢˜ã€‚

```kotlin
class MainApplication : Application() {
    override fun onCreate() {
        super.onCreate()

        // 1. (é‡è¦) æ³¨å†Œæ’ä»¶å´©æºƒå¤„ç†å™¨
        PluginCrashHandler.initialize(this)

        // 2. åˆå§‹åŒ–æ’ä»¶ç®¡ç†å™¨
        PluginManager.initialize(this)

        // 3. å¼‚æ­¥åŠ è½½å·²å¯ç”¨çš„æ’ä»¶
        lifecycleScope.launch {
            val loadedCount = PluginManager.loadEnabledPlugins()
            Log.d("MyApp", "Successfully loaded $loadedCount plugins.")
        }
    }
}
```

### 3\. åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæ’ä»¶

æ’ä»¶å¯ä»¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ `com.android.library` æˆ– `com.android.application` æ¨¡å—ã€‚

#### a. å®ç°æ’ä»¶å…¥å£

åˆ›å»ºä¸€ä¸ªç±»å¹¶å®ç° `IPluginEntryClass` æ¥å£ã€‚

```kotlin
class HomePluginEntry : IPluginEntryClass {

    // (å¯é€‰) å®šä¹‰æ­¤æ’ä»¶çš„ Koin ä¾èµ–æ³¨å…¥æ¨¡å—
    override val pluginModule: List<Module>
        get() = listOf(
            module {
                viewModel { HomeViewModel() }
                single<IUserService> { UserServiceImpl() }
            }
        )

    // å®šä¹‰æ’ä»¶çš„ä¸»ç•Œé¢
    @Composable
    override fun Content() {
        // ä½ çš„ Jetpack Compose å±å¹•
        HomeScreen()
    }
}
```

#### b. åœ¨ `AndroidManifest.xml` ä¸­å£°æ˜æ’ä»¶

åœ¨æ’ä»¶æ¨¡å—çš„ `AndroidManifest.xml` ä¸­ï¼Œé€šè¿‡ `<meta-data>` æ ‡ç­¾å£°æ˜æ’ä»¶ä¿¡æ¯ã€‚

```xml

<manifest>
    <application>
        <meta-data android:name="plugin.id" android:value="com.example.home" />
        <meta-data android:name="plugin.version" android:value="1.0.0" />
        <meta-data android:name="plugin.entryClass"
            android:value="com.example.home.HomePluginEntry" />
        <meta-data android:name="plugin.description" android:value="Home screen plugin" />

    </application>
</manifest>
```

ä½ å·²ç»å®Œæˆäº†ï¼ç°åœ¨åªéœ€å°†æ’ä»¶æ‰“åŒ…æˆ APKï¼Œå°±å¯ä»¥é€šè¿‡ `PluginManager` è¿›è¡Œå®‰è£…å’Œå¯åŠ¨äº†ã€‚


## ğŸ“¦ æ’ä»¶æ‰“åŒ…æŒ‡å— (Packaging Guide)

`ComboLite` æ¡†æ¶åœ¨è®¾è®¡ä¸Šæä¾›äº†æé«˜çš„çµæ´»æ€§ï¼Œæ”¯æŒå°†ä¸¤ç§ä¸åŒç±»å‹çš„ Android æ¨¡å—æ‰“åŒ…æˆå¯ç‹¬ç«‹å®‰è£…å’ŒåŠ è½½çš„æ’ä»¶ï¼š**`Application` æ¨¡å—**å’Œ **`Library` æ¨¡å—**ã€‚è¿™ä¸¤ç§æ¨¡å¼å„æœ‰å…¶æŠ€æœ¯åŸç†å’Œæœ€ä½³åº”ç”¨åœºæ™¯ï¼Œç†è§£å®ƒä»¬çš„å·®å¼‚å¯¹äºæ„å»ºä¸€ä¸ªé«˜æ•ˆã€å¯ç»´æŠ¤çš„æ’ä»¶åŒ–åº”ç”¨è‡³å…³é‡è¦ã€‚

### 1\. Application æ¨¡å—ï¼šè‡ªåŒ…å«çš„å®Œæ•´æ’ä»¶

å°†æ ‡å‡†çš„ `com.android.application` æ¨¡å—æ‰“åŒ…ä¸ºæ’ä»¶ï¼Œæ˜¯æœ€ç›´è§‚ã€æœ€ç®€å•çš„æ–¹å¼ã€‚è¿™ç§æ’ä»¶æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡ã€ä¾èµ–è‡ªåŒ…å«çš„å¾®å‹åº”ç”¨ã€‚

#### æ‰“åŒ…åŸç†

å…¶åŸç†ä¸æ„å»ºä¸€ä¸ªæ™®é€šçš„ Android åº”ç”¨å®Œå…¨ç›¸åŒã€‚Gradle çš„ `assemble` ä»»åŠ¡ä¼šå°†æ¨¡å—çš„æ‰€æœ‰ä»£ç ã€èµ„æºä»¥åŠé€šè¿‡ `implementation` å¼•å…¥çš„ç¬¬ä¸‰æ–¹ä¾èµ–åº“ï¼Œå…¨éƒ¨æ‰“åŒ…è¿›æœ€ç»ˆçš„ APK æ–‡ä»¶ä¸­ã€‚æ’ä»¶åŠ è½½åï¼Œå…¶å†…éƒ¨çš„ä¾èµ–ä¸å®¿ä¸»å’Œå…¶ä»–æ’ä»¶çš„ä¾èµ–æ˜¯éš”ç¦»çš„ï¼Œç”±å…¶è‡ªèº«çš„ `PluginClassLoader` åŠ è½½ã€‚

#### é…ç½®æ­¥éª¤

**a. æ·»åŠ æ ¸å¿ƒä¾èµ–**
åœ¨æ’ä»¶æ¨¡å—çš„ `build.gradle.kts` ä¸­ï¼Œå°†æ¡†æ¶æ ¸å¿ƒåº“å£°æ˜ä¸º `compileOnly`ã€‚è¿™æ„å‘³ç€æ¡†æ¶ä»£ç ä»…ç”¨äºç¼–è¯‘æœŸï¼Œè¿è¡Œæ—¶å°†ç”±å®¿ä¸» App æä¾›ï¼Œä»è€Œé¿å…æ‰“åŒ…é‡å¤çš„åº“ã€‚

```kotlin
// in your-plugin/build.gradle.kts
dependencies {
    // æ¡†æ¶æ ¸å¿ƒåº“ä»…åœ¨ç¼–è¯‘æ—¶éœ€è¦ï¼Œè¿è¡Œæ—¶ç”±å®¿ä¸»æä¾›
    compileOnly(projects.comboLiteCore)
    
    // æ’ä»¶å†…éƒ¨çš„å…¶ä»–ä¾èµ–å¯ä»¥æ­£å¸¸ä½¿ç”¨ implementation
    implementation("com.google.code.gson:gson:2.9.0")
    // ...
}
```

**b. (é‡è¦) é…ç½® Package ID ä»¥é˜²æ­¢èµ„æºå†²çª**
è¿™æ˜¯ç¡®ä¿æ’ä»¶ç¨³å®šè¿è¡Œçš„**å…³é”®æ­¥éª¤**ã€‚å½“å¤šä¸ªæ’ä»¶è¢«åŠ è½½åˆ°åŒä¸€ä¸ªå®¿ä¸»æ—¶ï¼Œä¸ºé¿å…ä¸åŒæ’ä»¶é—´çš„èµ„æº ID å‘ç”Ÿå†²çªï¼ˆä¾‹å¦‚ï¼Œä¸¤ä¸ªæ’ä»¶éƒ½æ‹¥æœ‰ä¸€ä¸ª `R.string.app_name`ï¼‰ï¼Œ**å¿…é¡»**ä¸ºæ¯ä¸ª `Application` æ’ä»¶æ¨¡å—æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„ `Package ID`ã€‚

`Package ID` ä¼šä½œä¸ºèµ„æº ID çš„å‘½åç©ºé—´å‰ç¼€ï¼ˆ`0xPP...`ä¸­çš„`PP`éƒ¨åˆ†ï¼‰ï¼Œç¡®ä¿æ¯ä¸ªæ’ä»¶çš„èµ„æº ID åœ¨å…¨å±€èŒƒå›´å†…éƒ½æ˜¯å”¯ä¸€çš„ã€‚

```kotlin
// in your-plugin/build.gradle.kts
android {
    // ...
    // ä¸º aapt2 å·¥å…·é¢å¤–æŒ‡å®šå‚æ•°
    aaptOptions {
        additionalParameters(
            // æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„ Package IDï¼Œå»ºè®®èŒƒå›´ä» 0x80 åˆ° 0xFF
            "--package-id", "0x80", 
            // å…è®¸ä½¿ç”¨ 0x7f ä»¥ä¸Šçš„ä¿ç•™ ID
            "--allow-reserved-package-id" 
        )
    }
}
```

> **æ³¨æ„**: æ¯ä¸ª `Application` æ’ä»¶çš„ `Package ID` éƒ½å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ä¾‹å¦‚ï¼Œæ’ä»¶ A ä½¿ç”¨ `0x80`ï¼Œæ’ä»¶ B ä½¿ç”¨ `0x81`ï¼Œä»¥æ­¤ç±»æ¨ã€‚

**c. æ‰§è¡Œæ‰“åŒ…**
ä½¿ç”¨ Android Gradle Plugin (AGP) æä¾›çš„æ ‡å‡†ä»»åŠ¡å³å¯å®Œæˆæ‰“åŒ…ã€‚

```bash
# æ„å»º Debug ç‰ˆæœ¬çš„æ’ä»¶ APK
./gradlew :your-plugin-module:assembleDebug

# æ„å»º Release ç‰ˆæœ¬çš„æ’ä»¶ APK
./gradlew :your-plugin-module:assembleRelease
```

#### ä¼˜åŠ£åŠ¿åˆ†æ

* âœ… **ä¼˜ç‚¹**:
  * **é«˜åº¦ç‹¬ç«‹**: æ’ä»¶è‡ªåŒ…å«æ‰€æœ‰ä¾èµ–ï¼Œä¸ä¾èµ–å®¿ä¸»çš„å¤–éƒ¨ç¯å¢ƒï¼Œéƒ¨ç½²ç®€å•ã€‚
  * **æ— å…¼å®¹æ€§çƒ¦æ¼**: æ— éœ€æ‹…å¿ƒå®¿ä¸»æ˜¯å¦æä¾›äº†æ’ä»¶æ‰€éœ€çš„ä¾èµ–åº“æˆ–ç‰ˆæœ¬ã€‚
  * **åŠŸèƒ½å®Œæ•´**: å¯ä»¥åƒä¸€ä¸ªå®Œæ•´åº”ç”¨ä¸€æ ·ï¼Œæ‹¥æœ‰å¤æ‚çš„ä¾èµ–å’ŒåŠŸèƒ½ã€‚
* âš ï¸ **æƒè¡¡**:
  * **ä½“ç§¯è¾ƒå¤§**: ç”±äºæ‰“åŒ…äº†æ‰€æœ‰ä¾èµ–ï¼Œæ’ä»¶ APK çš„ä½“ç§¯ä¼šç›¸å¯¹è¾ƒå¤§ã€‚
  * **æ½œåœ¨çš„ä¾èµ–å†—ä½™**: å¦‚æœå¤šä¸ªæ’ä»¶ä½¿ç”¨äº†ç›¸åŒçš„åº“ï¼ˆå¦‚ `OkHttp`ï¼‰ï¼Œè¿™äº›åº“ä¼šè¢«é‡å¤æ‰“åŒ…åˆ°æ¯ä¸ªæ’ä»¶ä¸­ï¼Œé€ æˆæ€»ä½“ç§¯å¢å¤§ã€‚

-----

### 2\. Library æ¨¡å—ï¼šè½»é‡åŒ–çš„å…±äº«ä¾èµ–æ’ä»¶

å°† `com.android.library` æ¨¡å—æ‰“åŒ…æˆæ’ä»¶ï¼Œæ˜¯ä¸€ç§æ›´é«˜çº§ã€æ›´è½»é‡åŒ–çš„æ–¹å¼ã€‚è¿™ç§æ’ä»¶æœ¬èº«ä¸åŒ…å«ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå…¶è¿è¡Œä¾èµ–äºå®¿ä¸» App æä¾›çš„å…¬å…±ä¾èµ–ç¯å¢ƒã€‚

#### æ‰“åŒ…åŸç†

æ­¤è¿‡ç¨‹ç”±é¡¹ç›®æ ¹ç›®å½• `build.gradle.kts` ä¸­å®šä¹‰çš„è‡ªå®šä¹‰ Gradle ä»»åŠ¡ `ConvertAarToApkTask` é©±åŠ¨ã€‚å…¶æ ¸å¿ƒåŸç†å¦‚ä¸‹ï¼š

1.  **æ„å»º AAR**: é¦–å…ˆï¼Œè°ƒç”¨æ ‡å‡†çš„ `:your-library-module:assemble` ä»»åŠ¡ï¼Œæ„å»ºå‡ºä¸€ä¸ªçº¯å‡€çš„ `AAR` æ–‡ä»¶ã€‚
2.  **è§£æ„ AAR**: ä»»åŠ¡è‡ªåŠ¨è§£å‹è¿™ä¸ª `AAR` æ–‡ä»¶ï¼Œè·å¾—å…¶ä¸­çš„ `classes.jar`ã€`res` èµ„æºã€`AndroidManifest.xml` ç­‰å†…å®¹ã€‚
3.  **èµ„æºç¼–è¯‘**: ä½¿ç”¨ Android æ„å»ºå·¥å…·é“¾ä¸­çš„ `aapt2`ï¼Œå¯¹æ’ä»¶èµ„æºè¿›è¡Œç‹¬ç«‹ç¼–è¯‘ï¼Œå¹¶æ ¹æ®é…ç½®**è‡ªåŠ¨åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ `packageId`** (å¦‚ `0x80`, `0x81` ...)ï¼Œä»æ ¹æºä¸Šè§£å†³äº†å¤šæ’ä»¶é—´çš„èµ„æº ID å†²çªã€‚
4.  **ä»£ç  DEX åŒ–**: ä½¿ç”¨ `d8` ç¼–è¯‘å™¨ï¼Œå°† `AAR` ä¸­çš„ `classes.jar` å’Œç¼–è¯‘èµ„æºåç”Ÿæˆçš„ `R.java` æ–‡ä»¶è½¬æ¢ä¸º Android è™šæ‹Ÿæœºå¯æ‰§è¡Œçš„ `classes.dex` æ–‡ä»¶ã€‚
5.  **é‡ç»„ä¸º APK**: æœ€åï¼Œå°†å¤„ç†è¿‡çš„ `AndroidManifest.xml`ã€èµ„æºã€`classes.dex` ä»¥åŠå…¶ä»–èµ„äº§ï¼ˆå¦‚ `assets`ã€`jniLibs`ï¼‰é‡æ–°æ‰“åŒ…ï¼Œå¹¶ä½¿ç”¨é…ç½®å¥½çš„ç­¾åæ–‡ä»¶è¿›è¡Œç­¾åï¼Œç”Ÿæˆä¸€ä¸ªåˆæ³•çš„ã€å¯è¢«æ¡†æ¶åŠ è½½çš„ APK æ–‡ä»¶ã€‚

#### é…ç½®æ­¥éª¤

**a. å£°æ˜ä¾èµ–ä½œç”¨åŸŸ**
åœ¨ Library æ’ä»¶æ¨¡å—çš„ `build.gradle.kts` ä¸­ï¼Œ**æ‰€æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–åº“éƒ½å¿…é¡»ä½¿ç”¨ `compileOnly` ä½œç”¨åŸŸ**ã€‚è¿™ç¡®ä¿äº†å®ƒä»¬ä»…ç”¨äºç¼–è¯‘ï¼Œä¸ä¼šè¢«æ‰“åŒ…è¿›æœ€ç»ˆäº§ç‰©ã€‚

```kotlin
// in your-library-plugin/build.gradle.kts
dependencies {
    // æ¡†æ¶æ ¸å¿ƒåº“
    compileOnly(projects.comboLiteCore)
    
    // æ‰€æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–éƒ½å¿…é¡»æ˜¯ compileOnly
    compileOnly("io.coil-kt:coil-compose:2.5.0")
    compileOnly("com.squareup.okhttp3:okhttp:4.12.0")

    // åªæœ‰é¡¹ç›®å†…çš„å…¶ä»–æ¨¡å—ä¾èµ–å¯ä»¥ä½¿ç”¨ implementation
    // implementation(project(":common-utils")) 
}
```

> **æŠ€æœ¯è¯´æ˜ï¼šä¸ºä½•å¿…é¡»ä½¿ç”¨ `compileOnly`ï¼Ÿ**
> è¿™å¹¶é `ComboLite` æ¡†æ¶çš„é™åˆ¶ï¼Œè€Œæ˜¯ Android Gradle Plugin çš„æ ‡å‡†è¡Œä¸ºã€‚AGP çš„ `assemble` ä»»åŠ¡åœ¨æ„å»º AAR æ—¶ï¼Œ**ä¸ä¼šå°†ä¼ é€’æ€§ä¾èµ–ï¼ˆtransitive dependenciesï¼‰æ‰“åŒ…è¿›å»**ã€‚AAR è¢«è®¾è®¡ä¸ºå¼€å‘åº“ï¼Œå…¶ä¾èµ–å…³ç³»éœ€è¦åœ¨æœ€ç»ˆæ‰“åŒ… App æ—¶ç”± App çš„ä¸»æ¨¡å—æ¥è§£æå’ŒåŒ…å«ã€‚æ‰‹åŠ¨å®ç°ä¸€ä¸ªèƒ½æ‰“åŒ…æ‰€æœ‰ä¾èµ–çš„ "Fat AAR" è¿‡ç¨‹éå¸¸å¤æ‚ä¸”æ˜“å‡ºé”™ã€‚
>
> `ComboLite` æ‹¥æŠ±è¿™ä¸€å®˜æ–¹è®¾å®šï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºä¸€ç§ä¼˜åŠ¿ï¼š**é€šè¿‡å¼ºåˆ¶ `compileOnly`ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæ¸…æ™°çš„ä¾èµ–ç®¡ç†æ¨¡å‹â€”â€”å®¿ä¸»è´Ÿè´£æä¾›å’Œç®¡ç†æ‰€æœ‰å…¬å…±ä¾èµ–ï¼Œæ’ä»¶åˆ™ä¿æŒæè‡´è½»é‡ã€‚**

**b. é…ç½®æ‰“åŒ…ä»»åŠ¡**
åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `build.gradle.kts` æ–‡ä»¶ä¸­ï¼Œå°†ä½ çš„ Library æ¨¡å—è·¯å¾„æ·»åŠ åˆ° `pluginModules` åˆ—è¡¨ä¸­ã€‚

```kotlin
// in /build.gradle.kts
// 1. åœ¨è¿™é‡Œé…ç½®ä½ çš„æ‰€æœ‰æ’ä»¶æ¨¡å—è·¯å¾„
val pluginModules = listOf(
    ":sample-plugin:common",
    ":sample-plugin:home",
    // ...
    ":your-new-library-plugin" // <-- æ·»åŠ ä½ çš„æ¨¡å—
)
```

**c. ä¸€é”®æ‰§è¡Œæ‰“åŒ…**
é…ç½®å®Œæˆåï¼Œè¿è¡Œæ¡†æ¶æä¾›çš„è‡ªå®šä¹‰ Gradle ä»»åŠ¡å³å¯ã€‚

```bash
# ä¸€é”®æ‰“åŒ…æ‰€æœ‰å·²é…ç½®çš„ Library æ’ä»¶ (Release ç‰ˆæœ¬)
./gradlew convertAllToReleasePluginApks

# å•ç‹¬æ‰“åŒ…æŸä¸ªæ’ä»¶ (ä¾‹å¦‚ home)
./gradlew convert_sample-plugin_home_release
```

æ‰“åŒ…äº§ç‰©å°†ä½äºé¡¹ç›®æ ¹ç›®å½•çš„ `build/output/plugin/` æ–‡ä»¶å¤¹ä¸‹ã€‚

#### ä¼˜åŠ£åŠ¿åˆ†æ

* âœ… **ä¼˜ç‚¹**:
  * **ä½“ç§¯æè‡´è½»é‡**: APK ä½“ç§¯é€šå¸¸åªæœ‰å‡ ååˆ°å‡ ç™¾ KBï¼Œæ›´æ–°å’Œä¸‹è½½æˆæœ¬æä½ã€‚
  * **æœç»ä¾èµ–å†²çª**: æ‰€æœ‰æ’ä»¶å…±äº«å®¿ä¸»æä¾›çš„åŒä¸€ä»½ä¾èµ–ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†ç‰ˆæœ¬å†²çªé—®é¢˜ã€‚
  * **ç»Ÿä¸€ä¾èµ–ç®¡ç†**: ä¾èµ–ç‰ˆæœ¬ç”±å®¿ä¸»ç»Ÿä¸€å‡çº§å’Œç®¡ç†ï¼Œç»´æŠ¤æˆæœ¬æ›´ä½ã€‚
  * **æå‡æ„å»ºé€Ÿåº¦**: å…±äº«ä¾èµ–æ„å‘³ç€æ›´å°‘çš„é‡å¤ç¼–è¯‘ã€‚
* âš ï¸ **æƒè¡¡**:
  * **ä¾èµ–å®¿ä¸»ç¯å¢ƒ**: æ’ä»¶çš„è¿è¡Œå¼ºä¾èµ–äºå®¿ä¸»ã€‚å¦‚æœå®¿ä¸»æœªèƒ½æä¾›å…¶è¿è¡Œæ—¶æ‰€éœ€çš„ä¾èµ–ï¼Œæ’ä»¶å°†åœ¨è¿è¡Œæ—¶å›  `ClassNotFoundException` è€Œé€ æˆä¾èµ–é“¾æ–­è£‚ï¼Œæ’ä»¶æ¡†æ¶å°†ä¼šè‡ªåŠ¨ç†”æ–­ç¦ç”¨è¯¥æ’ä»¶ã€‚
  * **ä¾èµ–ç‰ˆæœ¬å—é™**: æ’ä»¶å¿…é¡»ä½¿ç”¨å®¿ä¸»æä¾›çš„ä¾èµ–ç‰ˆæœ¬ï¼Œæ— æ³•åœ¨å†…éƒ¨è‡ªç”±å¼•å…¥ç‰¹å®šç‰ˆæœ¬çš„åº“ã€‚

### 3\. å¦‚ä½•é€‰æ‹©ï¼Ÿ

| åœºæ™¯                        | æ¨èæ–¹æ¡ˆ               | ç†ç”±                          |
|:--------------------------|:-------------------|:----------------------------|
| **å¤§å‹ã€ç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—** (å¦‚è´­ç‰©ã€æ¸¸æˆä¸­å¿ƒ) | **Application æ¨¡å—** | ä¸šåŠ¡å¤æ‚ï¼Œä¾èµ–ä¼—å¤šï¼Œéœ€è¦é«˜åº¦å†…èšå’Œç‹¬ç«‹æ€§ã€‚       |
| **æä¾›ç»™ç¬¬ä¸‰æ–¹é›†æˆçš„æ’ä»¶**           | **Application æ¨¡å—** | æ— æ³•æ§åˆ¶å®¿ä¸»ç¯å¢ƒï¼Œå¿…é¡»è‡ªåŒ…å«æ‰€æœ‰ä¾èµ–ä»¥ç¡®ä¿ç¨³å®šè¿è¡Œã€‚  |
| **UIç»„ä»¶åº“ã€å·¥å…·ç±»ã€é€šç”¨ä¸šåŠ¡**        | **Library æ¨¡å—**     | åŠŸèƒ½å•ä¸€ï¼Œä½“ç§¯å°ï¼Œé€‚åˆä½œä¸ºå…±äº«èµ„æºè¢«é¢‘ç¹æ›´æ–°å’Œå¤ç”¨ã€‚  |
| **æ‹¥æœ‰å¤§é‡æ’ä»¶çš„â€œè¶…çº§Appâ€**        | **Library æ¨¡å—**     | æœ€å¤§åŒ–åœ°å¤ç”¨å…¬å…±ä¾èµ–ï¼Œæ˜¾è‘—å‡å°‘åº”ç”¨çš„æ€»ä½“ç§¯å’Œå†…å­˜å ç”¨ã€‚ |
| **å¯¹æ’ä»¶æ›´æ–°é€Ÿåº¦å’Œå¤§å°æœ‰æè‡´è¦æ±‚**       | **Library æ¨¡å—**     | æå°çš„åŒ…ä½“ç§¯ä½¿å¾—åŠ¨æ€ä¸‹å‘å’Œçƒ­æ›´æ–°çš„ä½“éªŒè¿‘ä¹æ— æ„Ÿã€‚    |

é€šè¿‡åˆç†é€‰æ‹©æ‰“åŒ…ç­–ç•¥ï¼Œæ‚¨å¯ä»¥å……åˆ†åˆ©ç”¨ `ComboLite` æ¡†æ¶çš„ä¼˜åŠ¿ï¼Œæ„å»ºä¸€ä¸ªæ—¢çµæ´»åˆå¥å£®çš„ç°ä»£åŒ– Android åº”ç”¨ã€‚

## ğŸ”§ æ ¸å¿ƒ API ç”¨æ³•

`PluginManager` æä¾›äº†ä¸°å¯Œçš„ API æ¥ç®¡ç†å’Œä¸æ’ä»¶è¿›è¡Œäº¤äº’ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ€æ ¸å¿ƒçš„ç”¨æ³•ç¤ºä¾‹ã€‚

### 1. æ’ä»¶ç®¡ç†ï¼šå®‰è£…ã€å¸è½½ä¸å¯ç”¨

æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†é€šè¿‡ `PluginManager.installerManager` å’Œ `PluginManager` æœ¬èº«æ¥å®Œæˆã€‚

```kotlin
// --- å®‰è£…æ’ä»¶ ---
// å»ºè®®åœ¨ IO çº¿ç¨‹æ‰§è¡Œ
val pluginApkFile = File("path/to/your/plugin.apk")
val installResult = PluginManager.installerManager.installPlugin(pluginApkFile)

if (installResult is InstallResult.Success) {
    val pluginId = installResult.pluginInfo.pluginId
    println("æ’ä»¶ [$pluginId] å®‰è£…æˆåŠŸ!")

    // å®‰è£…æˆåŠŸåï¼Œå¯ä»¥é€‰æ‹©ç«‹å³å¯åŠ¨å®ƒ
    PluginManager.launchPlugin(pluginId)
} else {
    println("æ’ä»¶å®‰è£…å¤±è´¥: ${(installResult as InstallResult.Failure).message}")
}


// --- å¸è½½æ’ä»¶ ---
val pluginToUninstall = "com.example.home"
val uninstallSuccess = PluginManager.installerManager.uninstallPlugin(pluginToUninstall)
if (uninstallSuccess) {
    println("æ’ä»¶ [$pluginToUninstall] å¸è½½æˆåŠŸ!")
}

// --- æ§åˆ¶æ’ä»¶è‡ªå¯åŠ¨ ---
// ç¦æ­¢æŸä¸ªæ’ä»¶åœ¨ä¸‹æ¬¡åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½
PluginManager.setPluginEnabled("pluginId", false)
````

### 2\. æ’ä»¶è¿è¡Œä¸äº¤äº’

å¯åŠ¨æ’ä»¶å¹¶è·å–å…¶å…¥å£å®ä¾‹ï¼Œæ˜¯ä¸æ’ä»¶åŠŸèƒ½äº¤äº’çš„åŸºç¡€ã€‚

```kotlin
// --- å¯åŠ¨æˆ–é‡å¯æ’ä»¶ ---
// å¦‚æœæ’ä»¶æœªè¿è¡Œï¼Œåˆ™å¯åŠ¨ï¼›å¦‚æœå·²è¿è¡Œï¼Œåˆ™æ‰§è¡Œé“¾å¼é‡å¯
val success = PluginManager.launchPlugin("com.example.home")

// --- è·å–æ’ä»¶å…¥å£å®ä¾‹ ---
// è¿™å…è®¸ä½ ç›´æ¥è°ƒç”¨æ’ä»¶å…¥å£ç±»ä¸­å®šä¹‰çš„æ–¹æ³•æˆ–è®¿é—®å…¶å±æ€§
val homePlugin: IPluginEntryClass? = PluginManager.getPluginInstance("com.example.home")

// ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„å®¿ä¸» Activity éœ€è¦å±•ç¤ºæŸä¸ªæ’ä»¶çš„ Compose ç•Œé¢
// @Composable
// fun ShowPluginUI(pluginId: String) {
//     val plugin = PluginManager.getPluginInstance(pluginId)
//     plugin?.Content() // è°ƒç”¨æ’ä»¶çš„ @Composable æ–¹æ³•
// }
```

### 3\. è®¿é—®æ’ä»¶èµ„æº

å¦‚æœéœ€è¦ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®æŸä¸ªç‰¹å®šæ’ä»¶çš„ `Resources` å¯¹è±¡ã€‚

```kotlin
// è·å– "com.example.home" æ’ä»¶çš„èµ„æºç®¡ç†å™¨
val pluginResources: Resources? = PluginManager.resourcesManager.getResources("com.example.home")

// ä½¿ç”¨æ’ä»¶çš„èµ„æº ID æ¥åŠ è½½èµ„æº
val icon = pluginResources?.getDrawable(R.drawable.plugin_icon)
val title = pluginResources?.getString(R.string.plugin_title)
```

æ›´å¤šç”¨æ³•è¯·å‚è€ƒsampleé¡¹ç›®æ’ä»¶ç¤ºä¾‹æ¨¡å—

## ğŸ”§ å››å¤§ç»„ä»¶ç”¨æ³•

`ComboLite` æä¾›äº†ä¸€ç³»åˆ—ä¼˜é›…çš„ `Context` æ‰©å±•å‡½æ•°ï¼Œè®©è°ƒç”¨æ’ä»¶åŠŸèƒ½å¦‚åŸç”Ÿèˆ¬ä¸æ»‘ã€‚

### Activity ç”¨æ³•

åœ¨æ’ä»¶ä¸­å®šä¹‰ Activityï¼Œç»§æ‰¿ `BasePluginActivity`ã€‚

```kotlin
class HomeActivity : BasePluginActivity() { /* ... */ }
```

ä»ä»»ä½•åœ°æ–¹åƒå¯åŠ¨æ™®é€š Activity ä¸€æ ·å¯åŠ¨å®ƒã€‚

```kotlin
context.startPluginActivity(HomeActivity::class.java) {
    putExtra("USER_ID", 123)
}
```

### Service ç”¨æ³•

åœ¨æ’ä»¶ä¸­å®šä¹‰ Serviceï¼Œç»§æ‰¿ `BasePluginService`ã€‚

```kotlin
class MusicService : BasePluginService() { /* ... */ }
```

æ¡†æ¶é€šè¿‡**ä»£ç†æœåŠ¡æ± **æ¥ç®¡ç†æ’ä»¶ Serviceã€‚ä½ å¯ä»¥é€æ˜åœ°å¯åŠ¨ã€ç»‘å®šå’Œåœæ­¢å®ƒä»¬ã€‚

```kotlin
context.startPluginService(MusicService::class.java)
context.bindPluginService(MusicService::class.java, serviceConnection, Context.BIND_AUTO_CREATE)
context.stopPluginService(MusicService::class.java)
```

### BroadcastReceiver ç”¨æ³•

åœ¨æ’ä»¶ä¸­å®šä¹‰ Receiverï¼Œå®ç° `IPluginReceiver` æ¥å£ã€‚

```kotlin
class DownloadReceiver : IPluginReceiver { /* ... */ }
```

é€šè¿‡ `sendInternalBroadcast` å‘é€å¹¿æ’­ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å°†å…¶è·¯ç”±åˆ°å·²æ³¨å†Œçš„æ’ä»¶æ¥æ”¶å™¨ã€‚

```kotlin
context.sendInternalBroadcast("com.example.DOWNLOAD_COMPLETE") {
    putExtra("FILE_PATH", "/path/to/file")
}
```

### ContentProvider ç”¨æ³•

åœ¨æ’ä»¶ä¸­å®šä¹‰ Providerï¼ŒåƒåŸç”Ÿä¸€æ ·ç»§æ‰¿ `ContentProvider`ã€‚

```kotlin
class MyPluginProvider : ContentProvider() { /* ... */ }
```

å®¢æˆ·ç«¯éœ€è¦é€šè¿‡ä¸€ä¸ª**ç‰¹æ®Šçº¦å®šçš„ URI** æ¥è®¿é—®æ’ä»¶ Providerã€‚

```kotlin
// è®¿é—®æ’ä»¶ Provider çš„ URI çº¦å®šæ ¼å¼:
// "content://[å®¿ä¸»Providerçš„Authority]/[æ’ä»¶Providerçš„å®Œæ•´ç±»å]/[åŸå§‹è·¯å¾„]"

val pluginProviderClassName = MyPluginProvider::class.java.name
val hostAuthority = "com.jctech.plugin.sample.proxy.provider" // å®¿ä¸»ä»£ç†Providerçš„Authority
val originalPath = "items/1"

val proxyUri = Uri.parse("content://$hostAuthority/$pluginProviderClassName/$originalPath")

// ä½¿ç”¨ proxyUri è¿›è¡ŒæŸ¥è¯¢
context.contentResolver.query(proxyUri, null, null, null, null)
```

## ğŸ› ï¸ å››å¤§ç»„ä»¶å®ç°åŸç†

* **Activity**: é€šè¿‡åœ¨å®¿ä¸» `AndroidManifest` ä¸­åªéœ€è¦æ³¨å†Œä¸€ä¸ªé€æ˜çš„ `BaseHostActivity` ä½œä¸ºä»£ç†â€œå å‘â€ã€‚å¯åŠ¨æ’ä»¶
  Activity æ—¶ï¼Œæ¡†æ¶ä¼šå¯åŠ¨è¿™ä¸ªä»£ç† Activityï¼Œå¹¶å°†çœŸæ­£çš„æ’ä»¶ Activity ç±»åé€šè¿‡ `Intent` ä¼ é€’è¿‡å»ã€‚
  `BaseHostActivity` åœ¨å†…éƒ¨å®Œæˆæ’ä»¶ Activity çš„å®ä¾‹åŒ–ï¼Œå¹¶å°†å…¶ç”Ÿå‘½å‘¨æœŸä¸è‡ªèº«è¿›è¡Œç»‘å®šå’Œåˆ†å‘ã€‚
* **Service**: é‡‡ç”¨åˆ›æ–°çš„\*\*â€œä»£ç†æœåŠ¡æ± â€\*\*æ¨¡å¼ã€‚ä½ åœ¨å®¿ä¸» `AndroidManifest` ä¸­é¢„æ³¨å†Œå¤šä¸ª
  `BaseHostService`ã€‚å½“å¯åŠ¨ä¸€ä¸ªæ’ä»¶ Service æ—¶ï¼Œ`ProxyManager` ä¼šä»æ± ä¸­å¯»æ‰¾ä¸€ä¸ªç©ºé—²çš„ä»£ç† Service
  è¿›è¡Œç»‘å®šï¼Œå¹¶å°†æ’ä»¶ Service çš„ç”Ÿå‘½å‘¨æœŸä¸è¯¥ä»£ç†è¿›è¡Œå…³è”ã€‚è¿™ä½¿å¾—å¤šä¸ªæ’ä»¶ Service å¯ä»¥åŒæ—¶ã€ç‹¬ç«‹åœ°è¿è¡Œã€‚
* **BroadcastReceiver**: æ¡†æ¶åœ¨æ’ä»¶åŠ è½½æ—¶ï¼Œè§£æå…¶ `AndroidManifest.xml` ä¸­æ³¨å†Œçš„é™æ€å¹¿æ’­ï¼Œå¹¶ç”±
  `ProxyManager` è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚å½“ç³»ç»Ÿå¹¿æ’­ä¼ æ¥æ—¶ï¼Œç”±å®¿ä¸»ä¸­çš„ä»£ç† `BaseHostReceiver` æ¥æ”¶ï¼Œç„¶åæ ¹æ®
  `Action` ç­‰ä¿¡æ¯å¼‚æ­¥åˆ†å‘ç»™æ‰€æœ‰åŒ¹é…çš„æ’ä»¶ `IPluginReceiver`ã€‚
* **ContentProvider**: é€šè¿‡åœ¨å®¿ä¸»ä¸­é¢„æ³¨å†Œä¸€ä¸ªä»£ç† `BaseHostProvider`ï¼Œå®ƒä½œä¸ºæ‰€æœ‰æ’ä»¶ `Provider`
  çš„å”¯ä¸€å…¥å£ã€‚å¤–éƒ¨é€šè¿‡ä¸Šæ–‡çº¦å®šçš„ç‰¹æ®Š `Uri` æ ¼å¼æ¥è®¿é—®ã€‚ä»£ç† `Provider` æ ¹æ® `Uri` çš„ç¬¬ä¸€æ®µè·¯å¾„è§£æå‡ºç›®æ ‡æ’ä»¶
  `Provider` ç±»åï¼Œå®ä¾‹åŒ–åå°†é‡å†™è¿‡çš„ã€ç¬¦åˆæ’ä»¶åŸå§‹ `Authority` çš„ `Uri` å’Œè¯·æ±‚ä¸€å¹¶è½¬å‘ç»™å®ƒã€‚åŒæ—¶ï¼Œä»£ç†å±‚è¿˜è´Ÿè´£äº†æ’ä»¶
  `Provider` çš„ `exported` å®‰å…¨æ£€æŸ¥ã€‚

## ğŸ†š ä¸å…¶ä»–æ¡†æ¶å¯¹æ¯”

æ’ä»¶åŒ–æŠ€æœ¯å†ç»å¤šå¹´å‘å±•ï¼Œæ¶Œç°äº†è®¸å¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®ã€‚`ComboLite` åœ¨è®¾è®¡ä¹‹åˆï¼Œå……åˆ†å€Ÿé‰´äº†å‰è¾ˆä»¬çš„ç»éªŒï¼Œå¹¶é’ˆå¯¹ç°ä»£
Android å¼€å‘çš„ç—›ç‚¹è¿›è¡Œäº†é©æ–°ã€‚

æˆ‘ä»¬é€‰æ‹©ä¸å‡ ä¸ªä¸šç•ŒçŸ¥åä¸”å…·æœ‰ä»£è¡¨æ€§çš„æ¡†æ¶è¿›è¡Œå¯¹æ¯”ï¼Œä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°è¿›è¡ŒæŠ€æœ¯é€‰å‹ã€‚

### è¯¦ç»†å¯¹æ¯”è¡¨

| å¯¹æ¯”ç»´åº¦                | `ComboLite` (æˆ‘ä»¬)        | `Shadow` (è…¾è®¯)             | `VirtualAPK` / `DroidPlugin` |
|:--------------------|:------------------------|:--------------------------|:-----------------------------|
| **å®ç°åŸç†**            | âœ… **å®˜æ–¹API + ä»£ç†æ¨¡å¼**      | ğŸŒ“ **ç¼–è¯‘æœŸä»£ç é‡å†™ + è¿è¡Œæ—¶å§”æ‰˜**    | ğŸ’¥ **Hook ç³»ç»ŸæœåŠ¡ (AMS/PMS)**   |
| **ç¤¾åŒºæ´»è·ƒåº¦**           | ğŸš€ **æ´»è·ƒå¼€å‘ä¸­** (2025å¹´)    | âš ï¸ **ç»´æŠ¤æ”¾ç¼“** (æœ€åæ´»è·ƒçº¦2022å¹´)  | âŒ **é¡¹ç›®åœæ»** (æœ€åæ´»è·ƒçº¦2015-2018å¹´) |
| **å¼€å‘ç¯å¢ƒå…¼å®¹æ€§**         | âœ… **åŸç”Ÿæ”¯æŒæœ€æ–° AGP/Gradle** | âŒ **éœ€ä½¿ç”¨æ—§ç‰ˆæˆ–è‡ªè¡Œé­”æ”¹é€‚é…**        | âŒ **ä¸¥é‡ä¸å…¼å®¹ï¼ŒåŸºæœ¬æ— æ³•ä½¿ç”¨**           |
| **Jetpack Compose** | âœ… **åŸç”Ÿæ”¯æŒï¼Œæ ¸å¿ƒç‰¹æ€§**         | âŒ **ä¸æ”¯æŒ**                 | âŒ **ä¸æ”¯æŒ**                    |
| **çƒ­æ›´æ–°æ”¯æŒ**           | âœ… **æ”¯æŒ** (UI/ä»£ç /èµ„æº)     | âœ… **æ”¯æŒ** (Activity/ä»£ç /èµ„æº) | âœ… **æ”¯æŒ**                     |
| **å››å¤§ç»„ä»¶æ”¯æŒ**          | âœ… **å®Œå–„æ”¯æŒ** (ä»£ç†æ¨¡å¼)       | âœ… **Activityæ”¯æŒå®Œå–„**ï¼Œå…¶ä»–è¾ƒå¤æ‚  | âœ… **å®Œå–„æ”¯æŒ** (Hookæ¨¡å¼)          |
| **æ¡†æ¶å¤æ‚åº¦**           | âœ¨ **æä½** (åå‡ æ ¸å¿ƒç±»)        | âš ï¸ **é«˜** (éœ€ç†è§£å…¶æ„å»ºæ’ä»¶å’Œè¿è¡Œæ—¶)   | âš ï¸ **æé«˜** (æ¶‰åŠå¤§é‡ç³»ç»ŸæœåŠ¡Hook)     |
| **ä½¿ç”¨é›†æˆéš¾åº¦**          | âœ¨ **æä½** (å‡ è¡Œä»£ç é…ç½®)       | âš ï¸ **é«˜** (éœ€å®šåˆ¶æ„å»ºæµç¨‹)        | âš ï¸ **é«˜** (éœ€æ”¹åŠ¨åŸºç±»å’ŒApplication) |
| **ä¾µå…¥æ€§**             | âœ¨ **å¾®ä¹å…¶å¾®**              | âš ï¸ **è¾ƒé«˜** (å¼ºä¾èµ–å…¶Gradleæ’ä»¶)  | âš ï¸ **è¾ƒé«˜** (éœ€ç»§æ‰¿ç‰¹å®šåŸºç±»)          |
| **æ¶æ„æ¨¡å¼**            | ğŸŒ **å»ä¸­å¿ƒåŒ–** (æ’ä»¶å¯äº’ç®¡)     | ğŸ  **ä¸­å¿ƒåŒ–** (å®¿ä¸»ç®¡ç†æ’ä»¶)       | ğŸ  **ä¸­å¿ƒåŒ–** (å®¿ä¸»ç®¡ç†æ’ä»¶)          |
| **ä¾èµ–æ³¨å…¥æ”¯æŒ**          | âœ… **åŸç”Ÿ Koin**           | âŒ **éœ€è‡ªè¡Œå®ç°**               | âŒ **éœ€è‡ªè¡Œå®ç°**                  |
| **App å…¼å®¹æ€§**         | ğŸ¥‡ **æé«˜** (ä¸ä¾èµ–éå…¬å¼€API)   | ğŸ¥ˆ **è¾ƒé«˜** (ç»•å¼€å¤§éƒ¨åˆ†ç³»ç»Ÿé™åˆ¶)     | ğŸ¥‰ **ä½** (éšç³»ç»Ÿæ›´æ–°é¢‘ç¹å¤±æ•ˆ)         |

### å„æ–¹æ¡ˆç‰¹ç‚¹ä¸æƒè¡¡

#### å…³äº VirtualAPK / DroidPlugin

è¿™ä¸¤ä¸ªæ¡†æ¶æ˜¯**Hookæ–¹æ¡ˆçš„æ°å‡ºä»£è¡¨**ï¼Œåœ¨å®ƒä»¬è¯ç”Ÿçš„å¹´ä»£ï¼Œé€šè¿‡ Hook ç³»ç»Ÿæ ¸å¿ƒæœåŠ¡ï¼ˆ`ActivityManagerService`,
`PackageManagerService`ç­‰ï¼‰ï¼Œå®ç°äº†è¿‘ä¹å®Œç¾çš„â€œæ¬ºéª—â€ç³»ç»Ÿèƒ½åŠ›ï¼ŒåŠŸèƒ½éå¸¸å®Œå¤‡ã€‚

* **ä¼˜ç‚¹**: åœ¨ç‰¹å®šç³»ç»Ÿç‰ˆæœ¬ä¸‹ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œèƒ½æ”¯æŒç»å¤§å¤šæ•°åŸç”ŸAppçš„ç‰¹æ€§ã€‚
* **æƒè¡¡**: å®ƒä»¬çš„**è‡´å‘½å¼±ç‚¹**åœ¨äºå¯¹ Android ç³»ç»Ÿå®ç°çš„å¼ºè€¦åˆã€‚éšç€ Android ç‰ˆæœ¬çš„å¿«é€Ÿè¿­ä»£å’Œå‚å•†çš„æ·±åº¦å®šåˆ¶ï¼Œè¿™äº›åŸºäºéå…¬å¼€
  API çš„ Hook ç‚¹ææ˜“å¤±æ•ˆï¼Œå¯¼è‡´ä¸¥é‡çš„å…¼å®¹æ€§å’Œç¨³å®šæ€§é—®é¢˜ã€‚å¦‚ä»Šï¼Œå®ƒä»¬å‡å·²**åœæ­¢ç»´æŠ¤**ï¼Œæ— æ³•è·Ÿä¸Šç°ä»£åŒ–çš„
  Android å¼€å‘å·¥å…·é“¾ï¼ˆå¦‚ AGP 8.xï¼‰ï¼Œå·²ä¸é€‚åˆåœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨ã€‚

#### å…³äº Shadow

`Shadow` æ˜¯ä¸€ä¸ª**è®¾è®¡æ€æƒ³æä¸ºç²¾å·§**çš„æ¡†æ¶ï¼Œå®ƒå¦è¾Ÿè¹Šå¾„ï¼Œé€šè¿‡åœ¨ç¼–è¯‘æœŸé‡å†™ä»£ç ï¼Œåœ¨è¿è¡Œæ—¶å°†æ’ä»¶çš„ç»„ä»¶è°ƒç”¨å§”æ‰˜ç»™ä¸€ä¸ªå•ç‹¬çš„â€œè¿è¡Œæ—¶â€æ¥æ‰§è¡Œï¼Œä»è€Œç»•å¼€äº†å¯¹ç³»ç»ŸæœåŠ¡çš„ç›´æ¥
Hookã€‚

* **ä¼˜ç‚¹**: æ‹¥æœ‰å‡ºè‰²çš„ Activity å…¼å®¹æ€§ï¼Œä¸”ç¨³å®šæ€§è¿œé«˜äº Hook æ–¹æ¡ˆã€‚
* **æƒè¡¡**: `Shadow` çš„å¼ºå¤§èƒ½åŠ›æ¥è‡ªäºå…¶**å¤æ‚çš„æ„å»ºç³»ç»Ÿ**ã€‚å¼€å‘è€…éœ€è¦æ·±åº¦ä¾èµ–å…¶å®šåˆ¶çš„ Gradle
  æ’ä»¶ï¼Œç†è§£å…¶ç‹¬ç‰¹çš„â€œå®¿ä¸»-è¿è¡Œæ—¶-æ’ä»¶â€æ¨¡å‹ï¼Œå­¦ä¹ æ›²çº¿è¾ƒä¸ºé™¡å³­ã€‚åŒæ—¶ï¼Œé¡¹ç›®**ç»´æŠ¤ä¹Ÿå·²æ”¾ç¼“**ï¼Œå¯¹äºæœ€æ–°çš„
  Android ç‰¹æ€§å’Œå·¥å…·é“¾æ”¯æŒå­˜åœ¨æ»åã€‚

#### å…³äº ComboLite (æˆ‘ä»¬)

`ComboLite` é€‰æ‹©äº†**å›å½’å®˜æ–¹ã€æ‹¥æŠ±ç®€å•**çš„é“è·¯ã€‚æˆ‘ä»¬è®¤ä¸ºï¼Œå¯¹äºç»å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ï¼Œç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§è¿œæ¯”é€šè¿‡â€œé»‘ç§‘æŠ€â€å®ç°æŸäº›è¾¹ç¼˜åŠŸèƒ½æ›´ä¸ºé‡è¦ã€‚

* **ä¼˜ç‚¹**:
    * **æè‡´ç¨³å®š**: å®Œå…¨åŸºäºå®˜æ–¹å…¬å¼€çš„ä»£ç†ï¼ˆProxyï¼‰æ¨¡å¼å’Œ `ClassLoader` æœºåˆ¶ï¼Œä¸ç¢°ä»»ä½•éå…¬å¼€
      APIï¼Œå¤©ç„¶å…·å¤‡è·¨ç‰ˆæœ¬ã€è·¨å‚å•†çš„å…¼å®¹æ€§ã€‚
    * **æ‹¥æŠ±ç°ä»£**: åŸç”Ÿä¸º Jetpack Compose è®¾è®¡ï¼Œç§¯æç»´æŠ¤ï¼Œå§‹ç»ˆè·Ÿè¿›æœ€æ–°çš„å¼€å‘å·¥å…·é“¾ã€‚
    * **ç®€å•é€æ˜**: æ¡†æ¶æ ¸å¿ƒä»£ç æå°‘ï¼Œé€»è¾‘æ¸…æ™°ï¼Œé›†æˆå’ŒäºŒæ¬¡å¼€å‘éƒ½éå¸¸è½»æ¾ã€‚
    * **æ¶æ„çµæ´»**: ç‹¬ç‰¹çš„å»ä¸­å¿ƒåŒ–è®¾è®¡ä¸ºåº”ç”¨æ¶æ„æä¾›äº†æ›´å¤šå¯èƒ½æ€§ã€‚
* **æƒè¡¡** (ä¿®æ­£åçš„æè¿°):
  ä»£ç†æ¨¡å¼è™½ç„¶æå…¶ç¨³å®šï¼Œä½†ç›¸æ¯”äºèƒ½æ·±åº¦ç¯¡æ”¹ç³»ç»Ÿè¡Œä¸ºçš„ Hook æ–¹æ¡ˆï¼Œå¦‚åœ¨å¤„ç†æŸäº›å¤æ‚çš„ **Activity
  å¯åŠ¨æ¨¡å¼ï¼ˆLaunchModeï¼‰å’Œä»»åŠ¡æ ˆï¼ˆTask Affinityï¼‰ç®¡ç†**ä¸Šï¼Œè‡ªç”±åº¦ä¼šç›¸å¯¹å—é™ã€‚è¿™æ˜¯å› ä¸ºä»£ç† Activity è‡ªèº«çš„
  `LaunchMode` å’Œä»»åŠ¡æ ˆè¡Œä¸ºæ˜¯åœ¨å®¿ä¸»ä¸­é¢„å…ˆå£°æ˜çš„ï¼Œæ’ä»¶æ— æ³•åœ¨è¿è¡Œæ—¶å®Œå…¨åŠ¨æ€æ”¹å˜å®ƒä»¬ã€‚`ComboLite` çš„é€‰æ‹©æ˜¯ï¼Œåœ¨
  99% çš„ä¸»æµåœºæ™¯ä¸­æä¾›æœ€çº¯å‡€ã€æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯ä¸ºäº† 1% çš„è¾¹ç¼˜åœºæ™¯å»ç‰ºç‰²æ•´ä¸ªæ¡†æ¶çš„å¯é æ€§ã€‚

**æ€»è€Œè¨€ä¹‹ï¼Œå¦‚æœæ‚¨æ­£åœ¨å¼€å‘ä¸€ä¸ªé¢å‘æœªæ¥çš„ã€ä½¿ç”¨ Jetpack Compose
ç­‰ç°ä»£åŒ–æŠ€æœ¯æ ˆã€ä¸”å°†é•¿æœŸç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§æ”¾åœ¨é¦–ä½çš„é¡¹ç›®ï¼Œ`ComboLite` å°†æ˜¯æ‚¨çš„ä¸äºŒä¹‹é€‰ã€‚**

## å¦‚ä½•è´¡çŒ®

æˆ‘ä»¬çƒ­åˆ‡æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼Œè®© `ComboLite` å˜å¾—æ›´å¥½ï¼æ— è®ºæ˜¯æäº¤åŠŸèƒ½å»ºè®®ã€æŠ¥å‘Š Bugã€å‘èµ· Pull
Requestï¼Œè¿˜æ˜¯å¸®åŠ©æ”¹è¿›æ–‡æ¡£ï¼Œéƒ½æ˜¯å¯¹ç¤¾åŒºçš„å·¨å¤§å¸®åŠ©ã€‚

* **æŠ¥å‘Š Bug æˆ–æäº¤å»ºè®®**: è¯·é€šè¿‡ [GitHub Issues](https://github.com/lnzz123/ComboLite/issues)
  æäº¤ï¼Œè¿™æ˜¯æˆ‘ä»¬è¿›è¡Œå…¬å¼€è®¨è®ºå’Œè¿½è¸ªé—®é¢˜çš„æœ€ä½³æ¸ é“ã€‚
* **è´¡çŒ®ä»£ç **: è¯· Fork æœ¬ä»“åº“ï¼Œåœ¨æ‚¨çš„åˆ†æ”¯ä¸Šå®Œæˆä¿®æ”¹åï¼Œå‘ä¸Šæ¸¸å‘èµ· Pull Requestã€‚è¯·ç¡®ä¿æ‚¨çš„ä»£ç éµå¾ªé¡¹ç›®ç°æœ‰çš„ç¼–ç è§„èŒƒã€‚

å¦‚æœæ‚¨æœ‰æ›´å¤æ‚çš„æƒ³æ³•éœ€è¦è®¨è®ºï¼Œæˆ–è€…å¸Œæœ›è¿›è¡Œç§ä¸‹è”ç³»ï¼ˆä¾‹å¦‚æŠ¥å‘Šå®‰å…¨é—®é¢˜ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿéå¸¸æ¬¢è¿æ‚¨é€šè¿‡é‚®ä»¶è”ç³»æˆ‘ä»¬ã€‚

ğŸ“§ **è”ç³»é‚®ç®±**: `1755858138@qq.com`

## â¤ï¸ æ”¯æŒä¸èµåŠ© (Support & Sponsor)

`ComboLite` æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºé¡¹ç›®ï¼Œç”±æˆ‘åˆ©ç”¨ä¸šä½™æ—¶é—´è¿›è¡Œå¼€å‘å’Œç»´æŠ¤ã€‚å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ‚¨çš„æ”¯æŒå°†æ˜¯æˆ‘æŒç»­æŠ•å…¥çš„è«å¤§åŠ¨åŠ›ã€‚

<details>
  <summary>ç‚¹å‡»æŸ¥çœ‹èµåŠ©æ–¹å¼ (Click to see sponsorship methods)</summary>

  <br>

  <p>æ‚¨çš„æ¯ä¸€ä»½æ”¯æŒéƒ½æ„ä¹‰éå‡¡ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¯·æˆ‘å–æ¯å’–å•¡ â˜•ï¸ï¼š</p>

  <table>
    <tr>
      <td align="center">æ”¯ä»˜å® (Alipay)</td>
      <td align="center">å¾®ä¿¡æ”¯ä»˜ (WeChat Pay)</td>
    </tr>
    <tr>
      <td align="center"><img src="image/alipay.jpg" alt="Alipay" width="200"></td>
      <td align="center"><img src="image/wechatpay.jpg" alt="WeChat Pay" width="200"></td>
    </tr>
  </table>
</details>

## è®¸å¯ (License)

`ComboLite` éµå¾ª **Apache-2.0 license** å¼€æºè®¸å¯åè®®ã€‚

è¿™æ„å‘³ç€æ‚¨å¯ä»¥è‡ªç”±åœ°ï¼š

* **å•†ä¸šä½¿ç”¨**: åœ¨æ‚¨çš„å•†ä¸šäº§å“ä¸­å…è´¹ä½¿ç”¨ `ComboLite`ã€‚
* **åˆ†å‘**: è‡ªç”±åœ°åˆ†å‘æ‚¨çš„åº”ç”¨ï¼Œæ— è®ºå®ƒæ˜¯å¦åŒ…å« `ComboLite`ã€‚
* **ä¿®æ”¹**: æ‚¨å¯ä»¥åŸºäº `ComboLite` çš„æºç è¿›è¡Œä¿®æ”¹ä»¥æ»¡è¶³æ‚¨çš„éœ€æ±‚ã€‚

æ‚¨åªéœ€è¦éµå®ˆä»¥ä¸‹ç®€å•æ¡ä»¶ï¼š

* **ä¿ç•™å£°æ˜**: åœ¨æ‚¨çš„ä»£ç å’Œåˆ†å‘åŒ…ä¸­ï¼Œå¿…é¡»ä¿ç•™åŸå§‹çš„ç‰ˆæƒå’Œè®¸å¯è¯å£°æ˜ã€‚
* **å£°æ˜å˜æ›´**: å¦‚æœæ‚¨ä¿®æ”¹äº†æºä»£ç ï¼Œéœ€è¦åœ¨ä¿®æ”¹çš„æ–‡ä»¶ä¸­åšå‡ºå£°æ˜ã€‚

å®Œæ•´çš„è®¸å¯è¯å†…å®¹ï¼Œè¯·æŸ¥é˜…é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ [LICENSE](https://github.com/lnzz123/ComboLite/blob/main/LICENSE)
æ–‡ä»¶ã€‚